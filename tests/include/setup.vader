" Setup and helpers for all tests.

Before:
  let g:neomake_test_messages = []
  let g:neomake_test_log_all_messages = 1
  let g:neomake_test_messages_last_idx = -1

  if !empty(getloclist(0))
    " Work around https://github.com/vim/vim/issues/1676.
    lgetexpr 'bust_cache:1676:workaround_vim_issue'
    bwipe bust_cache
    lgetexpr ''
  endif
  if !empty(getqflist())
    " Work around https://github.com/vim/vim/issues/1676.
    cgetexpr 'bust_cache:1676:workaround_vim_issue'
    bwipe bust_cache
    cgetexpr ''
  endif

  " One-time setup.
  if exists(':NeomakeTestsWaitForFinishedJobs') != 2
    exe 'source' fnamemodify(g:vader_file, ':p:h').'/include/init.vim'
  endif

After:
  NeomakeTestsGlobalAfter
