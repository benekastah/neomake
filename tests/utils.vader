Include: _setup.vader

Execute (neomake#utils#LogMessage writes to logfile always):
  let neomake_verbose = 0
  Save neomake_logfile
  let g:neomake_logfile = tempname()
  call neomake#utils#LogMessage(1, 'msg1')
  Assert readfile(g:neomake_logfile)[0] =~# 'Log level 1: Neomake: msg1$'
  Restore

Execute (NeomakeTestsEnsureExe creates exe):
  Assert !executable('boobar')
  call g:NeomakeTestsEnsureExe('boobar')
  Assert executable('boobar')

Execute (Should expand arguments that start with %):
  let param1 = '%'
  let param2 = '%:h'
  let param3 = '--param1=%:h'
  let args = [param1, param2, param3]
  let expected_args = [expand(param1), expand(param2), param3]
  call neomake#utils#ExpandArgs(args)
  AssertEqual expected_args, args

Execute (Should expand arguments that start with escape char \):
  let param1 = '\%'
  let param2 = '\%:p'
  let args = [param1, param2]
  let expected_args = [expand(param1), expand(param2)]
  call neomake#utils#ExpandArgs(args)
  AssertEqual expected_args, args

Execute (Should not expand arguments that start with double %):
  let args = ['%%:h', '%%']
  let expected_args = ['%%:h', '%%']
  call neomake#utils#ExpandArgs(args)
  AssertEqual expected_args, args
